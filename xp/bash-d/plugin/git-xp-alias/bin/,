#!/bin/sh

get_shortcut=0

cmd="$1"
shift

if [ "$cmd" = "get_shortcut" ]; then
    get_shortcut=1
    cmd="$1"
    shift
fi

case $cmd in
    d*)
        shortcut=d
        arg1=${cmd:1}
        cmd="diff --color --find-renames"
        ;;
    l*)
        shortcut=l
        arg1=${cmd:1}
        cmd="log --color --decorate --abbrev-commit --find-renames"
        ;;
    mc*)
        shortcut=mc
        arg1=${cmd:2}
        cmd="mc"
        ;;
    mf*)
        shortcut=mf
        arg1=${cmd:2}
        cmd="mf"
        ;;
    st*)
        shortcut=st
        export GIT_XP_GRAPH=0
        export GIT_XP_FORMAT=0
        arg1=${cmd:2}
        cmd="status"
        ;;
    sf)
        shortcut=sf
        arg1=""
        cmd="diff --name-only --relative HEAD"
        ;;
    *)
        echo invalid command $cmd >&2
        exit 1
esac

if [ "$get_shortcut" = "1" ]; then
    echo $shortcut
    exit 0
fi

eval git $(_git_xp_interrept_flag conf $arg1) \
    $cmd \
    "$(_git_xp_interrept_flag arg $arg1)" "$@"

