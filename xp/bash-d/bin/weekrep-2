#!/bin/sh

_author=$(git config --local --get user.name)

_days=5
_show_time=0

while [ $# -gt 0 ]
do
    case $1 in
        -d|--days)
            shift
            _days=$1
            shift
            ;;
        -t)
            shift
            _show_time=1
            ;;
    esac
done

fmt="%s"
awk_filter='{print $0}'

if [ "$_show_time" = "1" ]; then
    fmt="%ad $fmt"
    awk_filter='{$4="";$5="";$6="     "; print $0}'
fi

git shortlog \
    --author="$_author" \
    --since="$_days days ago" \
    --no-merges \
    --format="$fmt" \
    | awk "$awk_filter"
