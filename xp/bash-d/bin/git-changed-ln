#!/bin/sh

git_diff_ln_new()
{
    # output is changed line number: <from> <end>; inclusive:
    # 27 7
    # 307 7
    # 316 5
    # 325 10
    # 350 1

    git diff -U0 "$@" \
        | grep '^@@' \
        | awk '{
    l=$3
    gsub("^+", "", l)
    split(l",1", x, ",")
    x[2]+=x[1]
    print x[1] " " x[2]
}'
}

git_diff_ln_new "$@"
